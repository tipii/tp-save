model Commande {
  id        String   @id @default(cuid())
  ref       String
  client    String
  items     Int
  priority  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Simple Edit Lock
  lockedBy    String? // User ID who locked it
  lockedUntil DateTime? // Auto-unlock after timeout (e.g., 15 minutes)

  // Simple History for display only
  history CommandeHistory[]
}

model CommandeHistory {
  id         String   @id @default(cuid())
  commandeId String
  userId     User     @relation(fields: [userId], references: [id])
  snapshot   Json // Full commande state at time of change
  timestamp  DateTime @default(now())

  commande Commande @relation(fields: [commandeId], references: [id], onDelete: Cascade)
}
